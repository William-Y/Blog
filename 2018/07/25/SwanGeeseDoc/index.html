<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color" content="#34495e">
  <title>Hexo</title>
  <link rel="alternate" href="path/of/rss" type="application/atom+xml">
  <link rel="shortcut icon" type="image/ico" href="/favicon.ico">
  <link rel="stylesheet" href="/css/style.css">
  

  

  

  

</head>

<body>
  <div class="mobile-header">
    <span><i class="iconfont icon-turnon" id="mobile-nav-toggle"></i></span>
    <div class="mobile-logo">
      <a href="/.">William</a>
    </div>
  </div>
  <div class="page" id="mobile-nav-panel">
    <div class="container">
      <header class="site-nav">
      <div class="nav-content">
        <div class="logo">
          <a href="/">William</a>
        </div>
        <nav class="navbar">
          <ul>
            
              <li class="menu-item">
                <a href="/" class="menu-item-link"><i class="iconfont icon-home"></i>首页</a>
              </li>
            
              <li class="menu-item">
                <a href="/archives" class="menu-item-link"><i class="iconfont icon-archive"></i>归档</a>
              </li>
            
              <li class="menu-item">
                <a href="/about" class="menu-item-link"><i class="iconfont icon-about"></i>关于</a>
              </li>
            
          </ul>
        </nav>
      </div>
</header>

      <div class="banner">
  <div class="show">
    <!-- <img src="/" alt="banner"> -->
    <div class="banner-title">
      
        <div class="post-title">
          
            <div class="post-tags">
    		    
    	      </div>
        </div>
      
    </div>
  </div>
</div>

      <main class="main"id="main">
          <article class="post">
  

  <header>
    <div class="post-title mobile-post-title">
      <h1></h1>
        <div class="post-tags">
        
        </div>
    </div>
    <div class="post-meta">
      <span class="post-time"><i class="iconfont icon-calendar"></i>2018-07-25</span>
      
      <!----------------------------------->
        
      <!----------------------------------->
    </div>
  </header>
  
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#软件简介"><span class="toc-text"><a href="#&#x8F6F;&#x4EF6;&#x7B80;&#x4ECB;" class="headerlink" title="&#x8F6F;&#x4EF6;&#x7B80;&#x4ECB;"></a>&#x8F6F;&#x4EF6;&#x7B80;&#x4ECB;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#编译、安装与运行"><span class="toc-text"><a href="#&#x7F16;&#x8BD1;&#x3001;&#x5B89;&#x88C5;&#x4E0E;&#x8FD0;&#x884C;" class="headerlink" title="&#x7F16;&#x8BD1;&#x3001;&#x5B89;&#x88C5;&#x4E0E;&#x8FD0;&#x884C;"></a>&#x7F16;&#x8BD1;&#x3001;&#x5B89;&#x88C5;&#x4E0E;&#x8FD0;&#x884C;</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#编译"><span class="toc-text"><a href="#&#x7F16;&#x8BD1;" class="headerlink" title="&#x7F16;&#x8BD1;"></a>&#x7F16;&#x8BD1;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装"><span class="toc-text"><a href="#&#x5B89;&#x88C5;" class="headerlink" title="&#x5B89;&#x88C5;"></a>&#x5B89;&#x88C5;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#运行"><span class="toc-text"><a href="#&#x8FD0;&#x884C;" class="headerlink" title="&#x8FD0;&#x884C;"></a>&#x8FD0;&#x884C;</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#软件使用说明"><span class="toc-text"><a href="#&#x8F6F;&#x4EF6;&#x4F7F;&#x7528;&#x8BF4;&#x660E;" class="headerlink" title="&#x8F6F;&#x4EF6;&#x4F7F;&#x7528;&#x8BF4;&#x660E;"></a>&#x8F6F;&#x4EF6;&#x4F7F;&#x7528;&#x8BF4;&#x660E;</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#打开文件-（File）"><span class="toc-text"><a href="#&#x6253;&#x5F00;&#x6587;&#x4EF6;-&#xFF08;File&#xFF09;" class="headerlink" title="&#x6253;&#x5F00;&#x6587;&#x4EF6; &#xFF08;File&#xFF09;"></a>&#x6253;&#x5F00;&#x6587;&#x4EF6; <em>&#xFF08;File&#xFF09;</em></span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#图像编辑-（Edit）"><span class="toc-text"><a href="#&#x56FE;&#x50CF;&#x7F16;&#x8F91;-&#xFF08;Edit&#xFF09;" class="headerlink" title="&#x56FE;&#x50CF;&#x7F16;&#x8F91; &#xFF08;Edit&#xFF09;"></a>&#x56FE;&#x50CF;&#x7F16;&#x8F91; <em>&#xFF08;Edit&#xFF09;</em></span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#分割数据-（Segmentation）"><span class="toc-text"><a href="#&#x5206;&#x5272;&#x6570;&#x636E;-&#xFF08;Segmentation&#xFF09;" class="headerlink" title="&#x5206;&#x5272;&#x6570;&#x636E; &#xFF08;Segmentation&#xFF09;"></a>&#x5206;&#x5272;&#x6570;&#x636E; <em>&#xFF08;Segmentation&#xFF09;</em></span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#工作空间-（Workspace）"><span class="toc-text"><a href="#&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4;-&#xFF08;Workspace&#xFF09;" class="headerlink" title="&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4; &#xFF08;Workspace&#xFF09;"></a>&#x5DE5;&#x4F5C;&#x7A7A;&#x95F4; <em>&#xFF08;Workspace&#xFF09;</em></span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#工具-（Tools）"><span class="toc-text"><a href="#&#x5DE5;&#x5177;-&#xFF08;Tools&#xFF09;" class="headerlink" title="&#x5DE5;&#x5177; &#xFF08;Tools&#xFF09;"></a>&#x5DE5;&#x5177; <em>&#xFF08;Tools&#xFF09;</em></span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#软件结构与执行流程分析"><span class="toc-text"><a href="#&#x8F6F;&#x4EF6;&#x7ED3;&#x6784;&#x4E0E;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x5206;&#x6790;" class="headerlink" title="&#x8F6F;&#x4EF6;&#x7ED3;&#x6784;&#x4E0E;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x5206;&#x6790;"></a>&#x8F6F;&#x4EF6;&#x7ED3;&#x6784;&#x4E0E;&#x6267;&#x884C;&#x6D41;&#x7A0B;&#x5206;&#x6790;</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#半自动化图像分割流程"><span class="toc-text"><a href="#&#x534A;&#x81EA;&#x52A8;&#x5316;&#x56FE;&#x50CF;&#x5206;&#x5272;&#x6D41;&#x7A0B;" class="headerlink" title="&#x534A;&#x81EA;&#x52A8;&#x5316;&#x56FE;&#x50CF;&#x5206;&#x5272;&#x6D41;&#x7A0B;"></a>&#x534A;&#x81EA;&#x52A8;&#x5316;&#x56FE;&#x50CF;&#x5206;&#x5272;&#x6D41;&#x7A0B;</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#核心算法分析"><span class="toc-text"><a href="#&#x6838;&#x5FC3;&#x7B97;&#x6CD5;&#x5206;&#x6790;" class="headerlink" title="&#x6838;&#x5FC3;&#x7B97;&#x6CD5;&#x5206;&#x6790;"></a>&#x6838;&#x5FC3;&#x7B97;&#x6CD5;&#x5206;&#x6790;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#程序运行时行为特征分析"><span class="toc-text"><a href="#&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x65F6;&#x884C;&#x4E3A;&#x7279;&#x5F81;&#x5206;&#x6790;" class="headerlink" title="&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x65F6;&#x884C;&#x4E3A;&#x7279;&#x5F81;&#x5206;&#x6790;"></a>&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x65F6;&#x884C;&#x4E3A;&#x7279;&#x5F81;&#x5206;&#x6790;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#应用优化方案"><span class="toc-text"><a href="#&#x5E94;&#x7528;&#x4F18;&#x5316;&#x65B9;&#x6848;" class="headerlink" title="&#x5E94;&#x7528;&#x4F18;&#x5316;&#x65B9;&#x6848;"></a>&#x5E94;&#x7528;&#x4F18;&#x5316;&#x65B9;&#x6848;</span></a></li></ol>
    </div>
  </div>


  <div class="post-content">
    <p>[TOC]</p>
<p>注：目前仅打框架、记录重要信息。</p>
<h1 id="软件简介"><a href="#软件简介" class="headerlink" title="软件简介"></a>软件简介</h1><p>见<a href="http://www.itksnap.org/docs/viewtutorial.php?chapter=TutorialSectionIntroduction" target="_blank" rel="noopener">官网的说明</a>。</p>
<h1 id="编译、安装与运行"><a href="#编译、安装与运行" class="headerlink" title="编译、安装与运行"></a>编译、安装与运行</h1><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>见<a href="http://shengliangd.coding.me/archivers/build-ITK-SNAP" target="_blank" rel="noopener">这里</a>。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>可以直接安装二进制包，不再赘述。</p>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>直接执行可执行文件即可。</p>
<h1 id="软件使用说明"><a href="#软件使用说明" class="headerlink" title="软件使用说明"></a>软件使用说明</h1><ul>
<li><h6 id="打开文件-（File）"><a href="#打开文件-（File）" class="headerlink" title="打开文件 （File）"></a>打开文件 <em>（File）</em></h6><p>​    右上角 <em>File</em> 中选择 <em>Open Main Image（快捷键Ctrl+G）</em> 浏览文件地址进行选定，也可以通过 <em>Recent Main Image</em>  选择文件地址，或者在主显示栏上方的 <em>Recent Image</em> 中通过影像缩略图进行打开。</p>
<p>​    打开文件后在软件的主显示栏会显示图片的三视图以及分割块的立体形状，可用鼠标滚轮调整光标所在视图处的图像在图片集中的位置。</p>
</li>
</ul>
<ul>
<li><h6 id="图像编辑-（Edit）"><a href="#图像编辑-（Edit）" class="headerlink" title="图像编辑 （Edit）"></a>图像编辑 <em>（Edit）</em></h6><p>​    itk-snap中对影像标注的方法有三种，分别为多边形分割 <em>（Polygon Segmentation）</em>，毛刷分割 <em>（Paintbrush）</em> 和半自动分割 <em>（Auto-Segmentation）</em>。</p>
<p>​    分割时可使用不同的Label代表不同的分割块，以此起到区分作用。 </p>
<ol>
<li><p>多边形分割 <em>（Polygon Segmentation）</em></p>
<p>​    多边形分割中有两种分割区域选定模式，一为<em>Smooth Curve</em> ，一为<em>Polygon</em> 。</p>
<p>​     <em>Smooth Curve</em>模式中，使用者可使用鼠标于图中做出任意形状的封闭曲线，并以此为依据做出分割区域。</p>
<p>​     <em>Polygon</em>模式中，使用者使用鼠标在图中给出多个点，并将各点依次连接形成封闭多边形，以此为依据做出分割区域。<em>Segmentation Length</em> 为连续作画时的最长大小。</p>
<p>​    作画完成后，若曲线末端未相互连接，可点击图像下方的<em>complete</em>用于封闭图形，而后点击<em>accept</em> 进行标注，标注前可勾选<em>Invert polygon</em> 用以标注封闭多边形外部。</p>
</li>
</ol>
</li>
</ul>
<ol>
<li><p>毛刷分割 <em>（Paintbrush）</em></p>
<p>   ​毛刷分割需要使用者自行涂刷标注区域。涂刷风格有方形与圆形，且可选择毛刷大小。</p>
<p>   ​毛刷分割中还有一种区域为自适应涂写，可自动识别毛刷所在区域中的灰度值，并且可以自行识别边界进行标注。</p>
<p>   ​在<em>Inspector</em> 中还有几个毛刷选项：3D表示标注时会自动识别所有图片在当前选定区域中的灰度值，并且同步进行识别标注。<em>Isotropic</em> 为各向同性处理，<em>（尚未摸清）</em>。 <em>Cursor chases brush</em> 表示当点击鼠标进行标注时，图像上的十字交叉点会自动跳至光标所在处。</p>
<p>   ​毛刷分割中点击右键可清除当前选定区域的标注，可用于修改各个算法中生成的标注区域。</p>
</li>
</ol>
<ol>
<li><p>半自动分割 <em>（Auto-Segmentation）</em></p>
<p> 半自动分割的使用分为几步：</p>
<p>   a. 在<em>Inspector</em> 区域中选定ROI <em>（Region of  Interest）</em>，即图像中出现的红色虚线所表示区域。勾选 <em>Resample ROI</em> 表示在分割时可重新选定标注区域；勾选 <em>Initialize with currer segmentation</em>  表示使用当前标注区域作为最后区域生长的种子。</p>
<p>   b. 点击<em>Segment 3D</em> ，进入分割模式选项。在软件框右方出现预分割阶段1 <em>（Presegmentation Stage 1）</em>，在Action中可选择预分割模式 <em>（Presegmentation mode）</em>， 该软件共有四种预分割模式，阈值模型 <em>（Thresholding）</em>，分类模型 <em>（Classification）</em>，聚类模型 <em>（Clustering）</em>以及边缘吸引模型 <em>（Edge Attraction）</em>。</p>
<p>   选择完模型后，则需要针对不同的模型对参数进行不同的处理。</p>
<ol>
<li><p>阈值模型 <em>（Thresholding）</em></p>
<p> 可调整阈值的大小以及上下阈值模式</p>
</li>
<li><p>分类模型 <em>（Classification）</em></p>
<p> 需选择不同类别所代表的区域，点击<em>Train Classifier</em> 进行训练。</p>
</li>
<li><p>聚类模型 <em>（Clustering）</em>        </p>
<p> 需选择聚类数以及迭代次数</p>
</li>
<li><p>边缘吸引模型 <em>（Edge Attraction）</em></p>
<p> 需调整平滑因子</p>
<p>调整参数后，在图像显示区域右上角有一张表示预处理过后得到的图像，称为<em>Speed Image</em>， 该图为预处理过后生成的用于后阶段的标注区域生长的基底。</p>
<p>c.  选择分类模型，初步调整参数后，进入阶段2。</p>
<p>在预分割阶段2 <em>（Presegmentation Stage 2）</em> 中，点击<em>Add Bubble at Cursor</em>，在交叉线交点添加<em>Bubble</em>，并以此作为图像生长的种子，在按钮下方可调整<em>Bubble</em>大小。    </p>
</li>
</ol>
<p>​      d. 点击<em>Next</em> 进入预分割阶段3 <em>（Presegmentation Stage 3）</em>， 可在 <em>Set Parameters …</em> 可设置生长算法的参数。</p>
<p>设置完参数后，点击下方▶按钮进行生长。其右边的按钮表示进行一次迭代，左边的按钮表示恢复原状态。</p>
<p>   ​    在生长完成后，点击下方<em>Finish</em>按钮完成自动标注，标注数据会显示在图像中。</p>
</li>
</ol>
<pre><code>在此三种标注方法之后，点击图像显示区域的左下角的*update*按钮可将标注块的3D影像图显示在第三块图像区域中。
</code></pre><ul>
<li><h6 id="分割数据-（Segmentation）"><a href="#分割数据-（Segmentation）" class="headerlink" title="分割数据 （Segmentation）"></a>分割数据 <em>（Segmentation）</em></h6><p>​    对于加载入图像显示区域的图像，可以通过<em>Segmentation</em> 菜单中的<em>Open Segmentation</em> 工具或者<em>Recent Segmentation</em> 直接载入图像的标注数据。</p>
<p>​    对于已标注的图像数据，也可以通过<em>Segmentation</em>菜单中的<em>Save Segmentation Image</em> 工具保存或者<em>Unload Segmentation</em> 卸载图像数据的标注数据。</p>
<p>​    对于<em>Label</em> 数据亦可通过<em>Import Label Description</em>载入标签，<em>Export Label Description</em> 保存标签。</p>
<p>​    对于已分割好的数据，可以在<em>Segmentation</em>菜单中的<em>Volumes and Statistics</em>获取各个标签块的体积，像素数，亮度等数据。</p>
<p>​    </p>
</li>
<li><h6 id="工作空间-（Workspace）"><a href="#工作空间-（Workspace）" class="headerlink" title="工作空间 （Workspace）"></a>工作空间 <em>（Workspace）</em></h6><p>​    该菜单用于加载 <em>（Open Workspace &amp; Recent Workspace）</em> 与保存 <em>（Save Workspace &amp; Save Workspace as）</em> 工作空间。</p>
</li>
</ul>
<ul>
<li><h6 id="工具-（Tools）"><a href="#工具-（Tools）" class="headerlink" title="工具 （Tools）"></a>工具 <em>（Tools）</em></h6><p>​     <em>Tools</em>菜单下的<em>Layer Inspector</em> 选项中包含了影像数据的各种属性，如对比度 <em>（Contrast）</em>，颜色图 <em>（Color Map）</em> 以及元数据 <em>（Metadata）</em>。该选项下的三个选项分别指向上述三种属性。</p>
<p>​    选项<em>Active  Main Tool</em> 为软件左沿<em>Toolbox</em>中的<em>Main Toolbar</em>中包含功能，分别为交叉线 <em>（Crosshair Tool）</em>，缩放模式 <em>（Zoom/Pan Mode）</em>，多边形分割工具 <em>（Polygon Drawing Tool）</em>，毛刷分割工具 <em>（Paintbrush Mode）</em>， 半自动分割工具 <em>（Active Contour Segmentation Mode）</em>，标注工具 <em>（Annotation Tool）</em>（用于对图上的各种特殊区域进行测量，注释等）。</p>
<p>​    选项<em>Active 3D Tools</em> 是用于对生成的3D影像进行处理的工具箱，位于<em>Toolbox</em>的最底端。</p>
<p>​        选定 <em>3D Trackball Tool</em>可切换3D图的视角与缩放。</p>
<p>​        选定<em>3D Crosshair Tool</em>，点击鼠标左键可调整三轴交叉点的位置。</p>
<p>​        选定<em>3D Scalpel Tool</em>，将Label切换为与当前3D影像不同的Label，可在3D影像表面做出标记。</p>
<p>​        选定<em>3D Spray Paint Tool</em>，点击鼠标左键选择切平面，可得到一个法向量一定的可平移平面。</p>
<p>​    选项<em>Reorient Image</em>用于重制图像显示区域的三视图。</p>
</li>
</ul>
<h1 id="软件结构与执行流程分析"><a href="#软件结构与执行流程分析" class="headerlink" title="软件结构与执行流程分析"></a>软件结构与执行流程分析</h1><h2 id="半自动化图像分割流程"><a href="#半自动化图像分割流程" class="headerlink" title="半自动化图像分割流程"></a>半自动化图像分割流程</h2><ol>
<li>使用四种预处理算法之一进行预处理；</li>
<li>设定初始区域；</li>
<li>使用 level set 算法使初始区域生长至适当范围。</li>
</ol>
<h1 id="核心算法分析"><a href="#核心算法分析" class="headerlink" title="核心算法分析"></a>核心算法分析</h1><p><a href="http://shengliangd.coding.me/archivers/ITK-SNAP-Core-Algorithm" target="_blank" rel="noopener">这里</a>。</p>
<h1 id="程序运行时行为特征分析"><a href="#程序运行时行为特征分析" class="headerlink" title="程序运行时行为特征分析"></a>程序运行时行为特征分析</h1><h1 id="应用优化方案"><a href="#应用优化方案" class="headerlink" title="应用优化方案"></a>应用优化方案</h1><p>算法优化，提高其自动化程度，直至能够全自动标注图像中的肿瘤。</p>

  </div>
  <div class="post-footer">the end</div>
</article>

          
  <nav class="pagination post-nav">
    
    
      <a href="/2018/07/25/ITK-VTK-Configuring/">
        <span class="next-post"><i class="iconfont icon-more"></i></span>
      </a>
    
  </nav>


          
  


      </main>
    </div>
    <footer>
      <div class="social-links">
        
          
            <a href="https://www.zhihu.com/"><i class="iconfont icon-zhihu"></i></a>
          
        
          
            <a href="https://weibo.com"><i class="iconfont icon-weibo"></i></a>
          
        
          
            <a href="https://github.com/"><i class="iconfont icon-github"></i></a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
      
        <div class="quote">
          <p>To be or not to be, that is a question.——William Shakespeare</p>
        </div>
      
      <div class="copyright">
        <p>
          由 <a href="https://hexo.io/">Hexo</a> 强力驱动
          <span>|</span>
          footer.page - <a href="https://github.com/William-Y/William-Y.github.io">William</a
        </p>
        <p>
          <span>
          
          &copy;
          
            2018
          
          </span>
          <i class="iconfont icon-circle"></i>
          <span>William</span>
        </p>
      </div>
</footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  <div id="mobile-nav">
  <nav id="mobile-nav-menu">
    
      <a href="/" class="mobile-nav-link"><i class="iconfont icon-home"></i>首页</a>
    
      <a href="/archives" class="mobile-nav-link"><i class="iconfont icon-archive"></i>归档</a>
    
      <a href="/about" class="mobile-nav-link"><i class="iconfont icon-about"></i>关于</a>
    
    <div class="mobile-intro"><i class="iconfont icon-pen"></i>Home Page of William</div>
  </nav>
</div>


  <script src="/libs/jQuery/jquery-3.2.1.min.js"></script>
  <script src="/libs/slideout/slideout.min.js"></script>
  
    <link rel="stylesheet" href="/libs/fancybox/jquery.fancybox.css">
    <script src="/libs/fancybox/jquery.fancybox.pack.js"></script>
  
  

  <script src="/js/ztopic.js"></script>
</body>
</html>
